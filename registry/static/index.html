<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netring Registry Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1>Netring Registry</h1>
                <p>Distributed Connectivity Monitor</p>
            </div>
            <div class="status-indicator" id="registryStatus">
                <div class="status-dot"></div>
                <span>Connecting...</span>
            </div>
        </header>

        <main class="main">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üåê</div>
                    <div class="stat-content">
                        <h3 id="totalMembers">-</h3>
                        <p>Active Members</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìç</div>
                    <div class="stat-content">
                        <h3 id="totalLocations">-</h3>
                        <p>Locations</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-content">
                        <h3 id="healthyMembers">-</h3>
                        <p>Healthy</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üîÑ</div>
                    <div class="stat-content">
                        <h3 id="lastUpdate">-</h3>
                        <p>Last Updated</p>
                    </div>
                </div>
            </div>

            <div class="content-grid">
                <section class="members-section">
                    <div class="section-header">
                        <h2>Ring Members</h2>
                        <button class="refresh-btn" id="refreshBtn" onclick="refreshData()">
                            <span class="refresh-icon">üîÑ</span>
                            Refresh
                        </button>
                    </div>
                    <div class="members-container" id="membersContainer">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>Loading members...</p>
                        </div>
                    </div>
                </section>

                <section class="metrics-section">
                    <div class="section-header">
                        <h2>Connectivity Overview</h2>
                        <div class="metrics-controls">
                            <button class="metric-toggle active" data-metric="all">All</button>
                            <button class="metric-toggle" data-metric="tcp">TCP</button>
                            <button class="metric-toggle" data-metric="http">HTTP</button>
                            <button class="metric-toggle" data-metric="bandwidth">Bandwidth</button>
                            <button class="metric-toggle" data-metric="traceroute">Traceroute</button>
                        </div>
                    </div>
                    <div class="filter-bar">
                        <div class="filter-group" data-tooltip="Filter by source location">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M213.66,101.66l-40,40a8,8,0,0,1-11.32-11.32L192,100H128a8,8,0,0,1,0-16h64L162.34,54.34a8,8,0,0,1,11.32-11.32l40,40A8,8,0,0,1,213.66,101.66ZM120,120a8,8,0,0,0-8,8v64H48V48h64a8,8,0,0,0,0-16H48A16,16,0,0,0,32,48V192a16,16,0,0,0,16,16h64a16,16,0,0,0,16-16V128A8,8,0,0,0,120,120Z"></path></svg>
                            <select id="sourceLocationFilter" class="bm-select">
                                <option value="all">All</option>
                            </select>
                        </div>
                        <div class="filter-group" data-tooltip="Filter by target location">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M208,120a8,8,0,0,0-8,8v64H48V48h64a8,8,0,0,0,0-16H48A16,16,0,0,0,32,48V192a16,16,0,0,0,16,16h64v24a8,8,0,0,0,16,0V208h48a16,16,0,0,0,16-16V128A8,8,0,0,0,208,120Zm-88,88V128a8,8,0,0,0-8-8H48v64h64Zm45.66-11.34-40-40a8,8,0,0,1,11.32-11.32L144,88h-24a8,8,0,0,1,0-16h40a8,8,0,0,1,8,8v40a8,8,0,0,1-16,0V96l-27.66,27.66A8,8,0,0,1,165.66,196.66Z"></path></svg>
                            <select id="targetLocationFilter" class="bm-select">
                                <option value="all">All</option>
                            </select>
                        </div>
                        <div class="filter-group" data-tooltip="Minimum latency threshold (ms)">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H136a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h40A8,8,0,0,1,192,128Z"></path></svg>
                            <input type="number" id="minLatency" min="0" max="10000" value="0" step="1" class="bm-input">
                        </div>
                        <div class="filter-group" data-tooltip="Maximum latency threshold (ms)">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm64-88a8,8,0,0,1-8,8H136a8,8,0,0,1-8-8V72a8,8,0,0,1,16,0v48h40A8,8,0,0,1,192,128Z"></path></svg>
                            <input type="number" id="maxLatency" min="0" max="10000" value="10000" step="1" class="bm-input">
                        </div>
                        <div class="filter-group" data-tooltip="Show only failures">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M240.26,186.42,148.74,34.42a24,24,0,0,0-41.48,0L15.74,186.42a23.92,23.92,0,0,0,20.74,37.58H219.52a23.92,23.92,0,0,0,20.74-37.58Zm-104-42.42a12,12,0,1,1-12-12A12,12,0,0,1,136.26,144Zm-20-36a12,12,0,0,1,24,0v24a12,12,0,0,1-24,0Z"></path></svg>
                            <input type="checkbox" id="showFailuresOnly" class="bm-checkbox">
                        </div>
                        <div class="filter-group" data-tooltip="Include offline members">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M247.31,124.76c-.35-.79-8.82-19.58-27.65-38.41C194.57,61.26,162.88,48,128,48S61.43,61.26,36.34,86.35C17.51,105.18,9,124,8.69,124.76a8,8,0,0,0,0,6.48c.35.79,8.82,19.58,27.65,38.41C61.43,194.74,93.12,208,128,208s66.57-13.26,91.66-38.35c18.83-18.83,27.3-37.62,27.65-38.41A8,8,0,0,0,247.31,124.76ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.47,133.47,0,0,1,25,128,133.33,133.33,0,0,1,48.07,97.25C70.33,75.19,97.22,64,128,64s57.67,11.19,79.93,33.25A133.46,133.46,0,0,1,231,128,133.33,133.33,0,0,1,207.93,158.75C185.67,180.81,158.78,192,128,192Zm0-120a56,56,0,1,0,56,56A56.06,56.06,0,0,0,128,72Zm0,96a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z"></path></svg>
                            <input type="checkbox" id="showOfflineTargets" checked class="bm-checkbox">
                        </div>
                    </div>
                    <div class="metrics-container" id="metricsContainer">
                        <div class="metric-placeholder">
                            <p>Connectivity metrics will appear here when members start reporting data</p>
                        </div>
                    </div>
                    <div id="paginationContainer"></div>
                </section>
            </div>
        </main>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>